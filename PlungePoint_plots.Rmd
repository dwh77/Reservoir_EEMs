---
title: "EEMs exploration"
author: "Dexter Howard"
date: "2023-06-23"
output: html_document
---

## Read in packages 

```{r, include = F}
library(tidyverse)
library(scales) #for date format on plots
library(patchwork) #arrange figures w/ slashes and lines
library(plotly)

```

## Get data 

```{r}
## EEMs plunge point data subset 
eems_cove <- read.csv("./EEMs_Results_CCR_plungepoint_subset.csv")
head(eems_cove)

```


## Cove plotting

```{r}
## Site 50
eems_cove |> 
  mutate(Date = mdy(Date)) |> 
  filter(Date < ymd("2023-08-08")) |> 
  select(1:6, HIX) |> 
  filter(Site == 50) |> 
  ggplot(aes(x = Date, y = HIX, color = Depth_m))+
  geom_point()+
  # facet_wrap(~Date, ncol = 3)+
  ggtitle("Site 50")+
  theme_bw()+
    scale_color_manual(values = c("0.1" = "#000000", "1.5" = "#E69F00", "6" = "#56B4E9", "9" = "#009E73", "20" = "#F0E442"))


## SMB plots 
eems_cove |> 
  mutate(Date = mdy(Date)) |> 
  filter(Date < ymd("2023-08-08")) |> 
  select(1:6, HIX) |> 
  filter(Site_num %in% c(50,3,30,300,3000)) |> 
  mutate(Distance = ifelse(Site_num == 3000, 0, NA),
         Distance = ifelse(Site_num == 300, 65, Distance),
         Distance = ifelse(Site_num == 30, 430, Distance),
         Distance = ifelse(Site_num == 3, 600, Distance), #fake distance for plotting
         Distance = ifelse(Site_num == 50, 900, Distance) #fake distance for plotting
         ) |> 
  mutate(Depth_m = ifelse(Depth_m == "SURF", 0.1, Depth_m),
         Depth_m = ifelse(Depth_m %in% c("BOT", "PD"), 1.5, Depth_m)) |> 
  ggplot(aes(x = Distance, y = HIX, color = Depth_m))+
  geom_point()+
  geom_line()+
  ylim(1,15)+ #one crazy outlier at -240, and one really high at 17
  facet_wrap(~Date, ncol = 3)+
  ggtitle("SMB")+
  theme_bw()+
    scale_color_manual(values = c("0.1" = "#000000", "1.5" = "#E69F00", "6" = "#56B4E9", "9" = "#009E73", "20" = "#F0E442"))

## HPB plots 
eems_cove |> 
  mutate(Date = mdy(Date)) |> 
  filter(Date > ymd("2023-05-04"),
         Date < ymd("2023-08-08")) |> 
  select(1:6, HIX) |> 
  filter(Site_num %in% c(50,1,10,100,1000)) |> 
  mutate(Distance = ifelse(Site_num == 1000, 0, NA),
        Distance = ifelse(Site_num == 100, 125, Distance), #fake distance for plotting
        Distance = ifelse(Site_num == 10, 249, Distance),
        Distance = ifelse(Site_num == 50, 900, Distance) #fake distance for plotting
         ) |> 
    mutate(Depth_m = ifelse(Depth_m == "SURF", 0.1, Depth_m),
         Depth_m = ifelse(Depth_m %in% c("BOT", "PD"), 1.5, Depth_m)) |> 
  ggplot(aes(x = Distance, y = HIX, color = Depth_m))+
  geom_point()+
  geom_line()+
  facet_wrap(~Date, ncol = 3)+
  ylim(1,15)+
  ggtitle("HPB")+
  theme_bw()+
    scale_color_manual(values = c("0.1" = "#000000", "1.5" = "#E69F00", "6" = "#56B4E9", "9" = "#009E73", "20" = "#F0E442"))
  


```

